#!/bin/sh
# A bitmap is created of a symmetrical_stripline. By adding the -v option
# to create_bmp_for_symmetrical_stripline the theoretical impedance
# is computed. 
# atlc is then called, and its eastimate calaculated, which will differ 
# slightly from the theoretical data 

ZoTheory=`$top_builddir/src/non_gui/create_bmp_for_symmetrical_stripline -v 1134 201 290 $top_builddir/tmp/50ohm-201h.bmp | awk '{print $4}'`
Zoatlc=`$top_builddir/src/non_gui/atlc -S $top_builddir/tmp/50ohm-201h.bmp | awk '{print $6}'`
MD5SUM=`$top_builddir/tools/src/mymd5sum $top_builddir/tmp/50ohm-201h.bmp`
EXMD5SUM=`$top_builddir/tools/src/mymd5sum $top_builddir/tmp/50ohm-201h.Ex.bmp`
rm $top_builddir/tmp/50ohm-201h.bmp $top_builddir/tmp/50ohm-201h.Ex.bmp
rm $top_builddir/tmp/50ohm-201h.Ey.bmp $top_builddir/tmp/50ohm-201h.E.bmp
rm $top_builddir/tmp/50ohm-201h.U.bmp $top_builddir/tmp/50ohm-201h.V.bmp
rm $top_builddir/tmp/50ohm-201h.Er.bmp

# echo "Zo theory = " $ZoTheory "Zo altc= " $Zoatlc " cksum of bitmap" 
# echo $MD5SUM "cksum of .Ex.bmp= " $EXMD5SUM
if [ $ZoTheory = 49.989477  ] && [ $Zoatlc = 49.85 ] && [ $MD5SUM = dae5292fe04dfd64abe1ae4e926d7365 ] && [ $EXMD5SUM = 4154e0e98b2c875dd4b88ef4ec19357c ]; then
#if [ $ZoTheory = 49.989477  ] && [ $Zoatlc = 49.85 ] && [ $MD5SUM = dae5292fe04dfd64abe1ae4e926d7365 ] && [ $EXMD5SUM = 49627eb62042f28a11e4bec7b19eeb01 ]; then
    echo "PASSED:" $0 >> tests.log
    exit 0
else
  echo "The following test will always fail if the gsl libary is not linked in"
  echo "FAILED:" $0 >> tests.log
  exit 1
fi


