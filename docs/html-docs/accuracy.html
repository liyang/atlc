<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 TRANSITIONAL//EN">
<HTML>
<HEAD>

<META name="generator" content="Mostly bluefish & vi. Sometimes netscape">
<META http-equiv="CONTENT-TYPE" content="text/html; charset=iso-8859-1">
<META name="AUTHOR" content="Dr. David Kirkby, drkirkby@ntlworld.com">
<META name="DESCRIPTION" content="Accuracy of atlc - Arbitrary Transmission Line Calculator">
<META name="KEYWORDS" content="Transmission line calculator atlc accuracy finite difference">
<TITLE>Accuracy of atlc - Arbitrary Transmission Line Calculator</TITLE>
</HEAD>
<BODY>

<H1>Accuracy and run-times of <COde>atlc</code></H1>
atlc is very accurate, as the data below will confirm. In a total of 31 tests performed, the maximum error was only 0.945 % and the rms error was 0.259  %. Read on if you wish to know how these figures were arrived at. <p>
In order to test the accuracy of  <COde>atlc</code>, some simple tests were devised, for which there are known analytical solutions for, which are detailed below.
<STRONG><H2>Comparisons between atlc and a round coaxial cable</H2></STRONG>
<img src="jpgs/coax2.jpg" ALT="coaxial line" align="left"../../../atlc-3.0.2/docs/html-docs/>One obvious case is the round coaxial cable, which has a well known and exact formula for its impedance. In the case of an vacuum dielectric, it is simply <p><STRONG>Zo=60.0*log<sub>e</sub>(D/d)</STRONG><p>, where D is the inner diameter of the outer conductor and d is the outer diameter of the inner conductor. <br>
Circular conductors can never be defined exactly using a square grid, so differences between the exact answer and <CODE>atlc's</code> answer are due to:
<UL><LI>Errors in representing a circle on a square grid</LI><LI>Errors in the method <COde>atlc</code> uses. </LI></UL>
<br>
Four coaxial cables were defined, which all had the internal dimensions of the outer conductor being 500 pixels. The inners were made 25, 50, 100, 200, and 400 pixels. The table below shows the results.
<TABLE border>
<TR>
<TD><STRONG>Filename</STRONG></td>
<TD><STRONG>D</STRONG></TD>
<TD><STRONG>d</STRONG></TD>
<TD>Er</TD>
<TD><STRONG>Zo (theory)</STRONG></TD>
<TD><STRONG>Zo (<COde>atlc</code>)</STRONG></TD>
<TD><STRONG>Error (%)</STRONG></TD>
<TD>T1</TD>
<TD>T2</TD>
<TD>T1/T2</TD>
</TR>
<TR>
<td>coax-500-400.bmp</td>
<TD>500</TD>
<TD>400</TD>
<TD>1.0</TD>
<TD>13.388</TD>
<TD>13.3710</TD>
<TD>-0.127 %</TD>
<TD>9</TD>
<TD>7</TD>
<TD>1.29</TD>
</TR>
<TR>
<TD>coax-500-200.bmp</TD>
<TD>500</TD>
<TD>200</TD>
<TD>1.0</TD>
<TD>54.977</TD>
<TD>54.9031</TD>
<TD>-0.134%</TD>
<TD>28</TD>
<TD>18</TD>
<TD>1.55</TD>
</TR>
<TR>
<TD>coax-500-200.bmp</TD>
<TD>500</TD>
<TD>200</TD>
<TD>100.0</TD>
<TD>5.4977</TD>
<TD>5.49031</TD>
<TD>-0.134%</TD>
<TD>28</TD>
<TD>18</TD>
<TD>1.55</TD>
</TR>
<TR>
<TD>coax-500-100.bmp</TD>
<TD>500</TD>
<TD>100</TD>
<TD>1.0</TD>
<TD>96.566</TD>
<TD>96.4277</TD>
<TD>-0.143%</TD>
<TD>47</TD>
<TD>29</TD>
<TD>1.62</TD>
</TR>
<TR>
<TD>coax-500-50.bmp</TD>
<TD>500</TD>
<TD>50</TD>
<TD>1.0</TD>
<TD>138.155</TD>
<TD>137.8984</TD>
<TD>-0.186%</TD>
<TD>56</TD>
<TD>36</TD>
<TD>1.56</TD>
</TR>
<TR>
<TD>coax-500-25.bmp</TD>
<TD>500</TD>
<TD>25</TD>
<TD>1.0</TD>
<TD>179.744</TD>
<TD>179.8969</TD>
<TD>+0.085 %</TD>
<TD>66</TD>
<TD>38</TD>
<TD>1.73</TD>
</TR>
</TABLE>
<br>
<STRONG>Notes:</STRONG> 
<p>
<OL>
	<LI>T1 is the run time on a dual processor Sun Ultra 60 (300 MHz), where atlc was <STRONG>not</STRONG> configured for multi-processor support,  so would not use both processors. T2 is the run time when <CODE>atlc</CODE> was configured with the <CODE>--with-mp</CODE> option so used both CPUs. T1/T2  is the ratio of the two times.</LI>
	<LI>All timing results were using atlc-3.0.1, which has r=1.95, cut-off=0.0001 and were compiled with gcc-3.0.3 using the -O3 optimisation option. The times recorded include the time to save the images of electric field, voltage energy etc to disk. The time can be reduced somewhat by using the -s option and skipping the saving of images</LI>
</OL>
<STRONG>The largest error for the coaxial cables is only 0.186%, with the RMS value being  0.139 %. </STRONG>

In all of these situations, accuracy can be improved at the expense of memory and CPU time, by using a finer grid. 
<STRONG><H2>

Comparisons between atlc and an eccentric coaxial line</H2></STRONG>
<img src="jpgs/eccentric_coax2.jpg" ALT="eccentric coaxial line" align="bottom">According to the book "Microwave and Optical Components, Volume 1, - Microwave Passive and Antenna Components, page 7, there is an exact formula for the impedance of a coaxial line (see below). If O is the offset between the centres of the two conductors, then the impedance Zo assuming Er=1, is <p><STRONG> 60 log<sub>e</sub>(x+sqrt(x^2-1)) </STRONG>where <STRONG>x=(d<sup>2</sup>+D<sup>2</sup>-4 O<sup>2</sup>)/(2*D*d)                         </STRONG>
<p>
<p>
<p>
<p>

<TABLE border align="bottom"../../../atlc-3.0.2/docs/html-docs/>
<TR>
<TD><STRONG>Filename</STRONG></td>
<TD><STRONG>D</STRONG></TD>
<TD><STRONG>d</STRONG></TD>
<TD><STRONG>O</STRONG></TD>
<TD>Er</TD>
<TD><STRONG>Zo (theory)</STRONG></TD>
<TD><STRONG>Zo (<COde>atlc</code>)</STRONG></TD>
<TD><STRONG>Error (%)</STRONG></TD>
<TD>T1</TD>
<TD>T2</TD>
<TD>T1/T2</TD>
</TR>
<TR>
<td>eccentric-a.bmp</td>
<TD>400</TD>
<TD>320</TD>
<TD>0</TD>
<TD>1.0</TD>
<TD>13.388613</TD>
<TD>13.3755</TD>
<TD>-0.097 %</TD>
<TD>-</TD>
<TD>6</TD>
<TD>-</TD>
</TR>
<TR>
<td>eccentric-b.bmp</td>
<TD>500</TD>
<TD>400</TD>
<TD>40</TD>
<TD>1.0</TD>
<TD>8.043820</TD>
<TD>8.0240</TD>
<TD>-0.246%</TD>
<TD>-</TD>
<TD>7</TD>
<TD>-</TD>
</TR>
<TR>
<td>eccentric-c.bmp</td>
<TD>400</TD>
<TD>160</TD>
<TD>0</TD>
<TD>1.0</TD>
<TD>54.977</TD>
<TD>54.9552</TD>
<TD>-0.040%</TD>
<TD>-</TD>
<TD>11</TD>
<TD>-</TD>
</TR>
<TR>
<td>eccentric-d.bmp</td>
<TD>500</TD>
<TD>200</TD>
<TD>150</TD>
<TD>1.0</TD>
<TD>52.020884</TD>
<TD>51.9983</TD>
<TD>-0.043%</TD>
<TD>-</TD>
<TD>13</TD>
<TD>-</TD>
</TR>
<TR>
<td>eccentric-e.bmp</td>
<TD>500</TD>
<TD>200</TD>
<TD>100</TD>
<TD>1.0</TD>
<TD>41.588831</TD>
<TD>41.5628</TD>
<TD>-0.063%</TD>
<TD>-</TD>
<TD>16</TD>
<TD>-</TD>
</TR>
<TR>
<td>eccentric-f.bmp</td>
<TD>500</TD>
<TD>100</TD>
<TD>0</TD>
<TD>1.0</TD>
<TD>96.566275</TD>
<TD>96.4893</TD>
<TD>-0..080%</TD>
<TD>-</TD>
<TD>16</TD>
<TD>-</TD>
</TR>
<TR>
<td>eccentric-g.bmp</td>
<TD>500</TD>
<TD>100</TD>
<TD>50</TD>
<TD>1.0</TD>
<TD>94.007954</TD>
<TD>93.9300</TD>
<TD>-0.083%</TD>
<TD>-</TD>
<TD>18</TD>
<TD>-</TD>
</TR>
<TR>
<td>eccentric-h.bmp</td>
<TD>500</TD>
<TD>100</TD>
<TD>100</TD>
<TD>1.0</TD>
<TD>85.525017</TD>
<TD>85.4427</TD>
<TD>-0.096%</TD>
<TD>-</TD>
<TD>21</TD>
<TD>-</TD>
</TR>
<TR>
<td>eccentric-i.bmp</td>
<TD>400</TD>
<TD>40</TD>
<TD>0</TD>
<TD>1.0</TD>
<TD>138.155106</TD>
<TD>138.0519</TD>
<TD>-0.075%</TD>
<TD>-</TD>
<TD>18</TD>
<TD>-</TD>
</TR>
<TR>
<td>eccentric-j.bmp</td>
<TD>500</TD>
<TD>50</TD>
<TD>50</TD>
<TD>1.0</TD>
<TD>135.679453</TD>
<TD>135.5753</TD>
<TD>-0.077%</TD>
<TD>-</TD>
<TD>20</TD>
<TD>-</TD>
</TR>
<TR>
<td>eccentric-k.bmp</td>
<TD>500</TD>
<TD>50</TD>
<TD>100</TD>
<TD>1.0</TD>
<TD>127.555728</TD>
<TD>127.4478</TD>
<TD>-0.085%</TD>
<TD>-</TD>
<TD>22</TD>
<TD>-</TD>
</TR>
<TR>
<td>eccentric-l.bmp</td>
<TD>400</TD>
<TD>40</TD>
<TD>12</TD>
<TD>1.0</TD>
<TD>110.834765</TD>
<TD>110.7099</TD>
<TD>-0.113%</TD>
<TD>-</TD>
<TD>23</TD>
<TD>-</TD>
</TR>
<TR>
<td>eccentric-m.bmp</td>
<TD>400</TD>
<TD>40</TD>
<TD>160</TD>
<TD>1.0</TD>
<TD>73.540034</TD>
<TD>73.2376</TD>
<TD>-0.411%</TD>
<TD>-</TD>
<TD>21</TD>
<TD>-</TD>
</TR>
<TR>
<td>eccentric-n.bmp</td>
<TD>1600</TD>
<TD>160</TD>
<TD>640</TD>
<TD>1.0</TD>
<TD>73.540034</TD>
<TD>73.2376</TD>
<TD>-0.134%</TD>
<TD>-</TD>
<TD>-</TD>
<TD>-</TD>
</TR>

</TABLE><p>
Note, due to their large size, the eccentric coax files are not distributed. They can however easily be made with the supplied script <a href="../../examples/create">create</a>, which itself calls the programme <a href="circ_in_circ.1.html">circ_in_circ</a>, which is used for creating a circular conductor  inside another circular conductor. 
<pre><CODE>circ_in_circ 500 400 0 1 &gt eccentric-a.bmp
circ_in_circ 500 400 40 1 &gt eccentric-b.bmp
circ_in_circ 500 200 0 1 &gt eccentric-c.bmp</CODE>
</pre>
the file <CODE>create </CODE>. 
<p>
<STRONG><H2>Comparisions between atlc and a symmetrical strip transmission line</H2></STRONG>
Another obvious test is a symmetrical strip transmission line - see diagramme below. <p>
<img src="jpgs/symmetrical_strip.jpg" ALT="Symmetrical Strip Transmission Line"../../../atlc-3.0.2/docs/html-docs/><p>
This has an exact analytical solution, dependant on the ratio of the width of the inner conductor w, to the distance between the two outer conductors H.  This assumes that the outer conductors extend to plus and minus infinity and the inner conductor is infinitely thin. This structure has the advantage of requiring no curves, so can be represented more accurately with the square grid used in <CODE>atlc.</CODE> However, its impossible to have an inner conductor that is less than 1 pixel high and it is impossible to make the dimension W  infinity wide as it was take an infinite amount of disk space, RAM and CPU time).  However, if the width W is made at least 4xH+w, then making it any larger does not seem to have much affect on the result. Hence the results below were obtained by setting the internal W equal to 4 times the internal height plus the inner width W. The actual bitmaps used by atlc are 10 pixels higher and 10 pixels wider, to enforce a boundary. The programme <CODE>sym_strip</CODE> can be used to quickly produce suitable bitmaps for such circumstances. It enforces having the width W of the  equal to at least w+4*h, as well as H being at least 201 pixels. It must be odd, since the one pixel inner conductor must fit centrally between the two outer conductors.<br>
<CODE>sym_strip 1200 201 290 50-Ohm-201.bmp<br>
w=290 H=201 w/H=1.442786 xo=23.753772<br>
Zo is theoretically 49.989477 Ohms (assuming W is infinite)<br></CODE>
<br>
This structure, which has a w/H value of 1.442786, has a theoretical impedance close to 50 Ohms (49.989477 to be precise). atlc calculates this to be 49.8457 Ohms, an error of only 0.087%, when using a  grid 1134x201. Increasing the number of pixels to 2222x401,  the results are surprisingly somewhat worst with an eror of 0.191%. I have no explanation for this. but increasging th pixels further to 4399x801, results in a larger error still, as atlc reports this as 49.9127, an error of  eror of <p>
<TABLE border>
<TR>
<TD><STRONG>Filename</STRONG></td>
<TD><STRONG>W</STRONG></TD>
<TD><STRONG>H</STRONG></TD>
<TD><STRONG>w</STRONG></TD>
<TD><STRONG>w/H</STRONG></TD>
<TD><STRONG>Zo (theory)</STRONG></TD>
<TD><STRONG>Zo (<COde>atlc</code>)</STRONG></TD>
<TD><STRONG>Error (%)</STRONG></TD>
<TD>T1</TD>
<TD>T2</TD>
<TD>T1/T2</TD>
</TR>
<TR>
<TD>25-Ohm-201.bmp</TD>
<TD>1512</TD>
<TD>201</TD>
<TD>668</TD>
<TD>3.323383</TD>
<TD>25.017590</TD>
<TD>24.9194</TD>
<TD>-0.392%</TD>
<TD>44</TD>
<TD>25</TD>
<TD>1.76</TD>
</TR>
<TR>
<TD>25-Ohm-401.bmp</TD>
<TD>2978</TD>
<TD>401</TD>
<TD>1334</TD>
<TD>3.326683</TD>
<TD>24.995678</TD>
<TD>24.9383</TD>
<TD>-0.409%</TD>
<TD>393</TD>
<TD>216</TD>
<TD>1.81</TD>
</TR>
<TR>
<TD>25-Ohm-801.bmp</TD>
<TD>2978</TD>
<TD>401</TD>
<TD>1334</TD>
<TD>3.326683</TD>
<TD>24.995678</TD>
<TD>24.9383</TD>
<TD>-0.409%</TD>
<TD>393</TD>
<TD>216</TD>
<TD>1.81</TD>
</TR>
<TR>
<td>50-Ohm-201.bmp</td>
<TD>1134</TD>
<TD>201</TD>
<TD>290</TD>
<TD>1.42786</TD>
<TD>49.989477</TD>
<TD>49.8457</TD>
<TD>+0.087%</TD>
<TD>26</TD>
<TD>19</TD>
<TD>1.37</TD>
</TR>
<TR>
<TD>50-Ohm-401.bmp</TD>
<TD>2222</TD>
<TD>401</TD>
<TD>578</TD>
<TD>1.441397</TD>
<TD>50.026376</TD>
<TD>49.9307</TD>
<TD>-0.191%</TD>
<TD>329</TD>
<TD>181</TD>
<TD>1.82</TD>
</TR>
<TR>
<TD>50-Ohm-801.bmp</TD>
<TD>4399</TD>
<TD>801</TD>
<TD>1155</TD>
<TD>1.441948</TD>
<TD>50.011737</TD>
<TD>zoatlc</TD>
<TD>err</TD>
<TD>t1</TD>
<TD>t2</TD>
<TD>t1/t2</TD>
</TR>
<TR>
<TD>100-Ohm-201.bmp</TD>
<TD>945</TD>
<TD>201</TD>
<TD>101</TD>
<TD>0.502488</TD>
<TD>100.160858</TD>
<TD>100.0925</TD>
<TD>-0.068%</TD>
<TD>?</TD>
<TD>22</TD>
<TD> 1.28</TD>
</TR>
<TR>
<TD>100-Ohm-401.bmp</TD>
<TD>1846</TD>
<TD>401</TD>
<TD>202</TD>
<TD>0.503741</TD>
<TD>100.023</TD>
<TD>99.9115</TD>
<TD>-0.329%</TD>
<TD>299</TD>
<TD>207</TD>
<TD>1.75</TD>
</TR>
<TR>
<TD>100-Ohm-801.bmp</TD>
<TD>1846</TD>
<TD>401</TD>
<TD>202</TD>
<TD>0.503741</TD>
<TD>100.023</TD>
<TD>99.9115</TD>
<TD>-0.329%</TD>
<TD>299</TD>
<TD>207</TD>
<TD>1.75</TD>
</TR>

<TR>
<TD>200-Ohm-201.bmp</TD>
<TD>862</TD>
<TD>201</TD>
<TD>18</TD>
<TD>0.089552</TD>
<TD>200.818306</TD>
<TD>202.7158</TD>
<TD>+0.945%</TD>
<TD>x</TD>
<TD>19</TD>
<TD>1.53</TD>
</TR>
<TR>
<TD>200-Ohm-401.bmp</TD>
<TD>1680</TD>
<TD>401</TD>
<TD>36</TD>
<TD>0.089776</TD>
<TD>200.669461</TD>
<TD>201.1821</TD>
<TD>+0.255%</TD>
<TD>284</TD>
<TD></TD>
<TD>1.69</TD>
</TR>
<TR>
<TD>200-Ohm-801.bmp</TD>
<TD>3317</TD>
<TD>801</TD>
<TD>73</TD>
<TD>0.091136</TD>
<TD>199.770642</TD>
<TD>199.6340</TD>
<TD>-0.068%</TD>
<TD>3447</TD>
<TD>1978</TD>
<TD>1.74</TD>
</TR>
</TABLE>
<p>
Note, due to their large size, most of the  files *Ohm*.bmp are not distributed with <CODE>atlc</CODE>. but may be produced easily with the aid of a script called <CODE>create</CODE> in the examples directory. The script create calls a programme <CODE>sym_strip</CODE>, which was developed for the purpose of producing symmetrical stripline bitmaps. Sorry there is no documentation for <CODE>sym_strip</CODE> now, but if look at the script <CODE>create</CODE>, its use should be obvious.
 <a name="Accuracy_coupler"><H2>Accuracy of <CODE>atlc</CODE> with coupled lines</H2></a>
Testing the accuracy of <CODE>atlc</CODE> with coupled lines is more difficult that with single isolated lines, since there is to my knowledge only one structure for which exact analytical results exist. For two infinitely thin conductors halfway beween two infinitely wide groundplanes, the odd and even mode impedances can be calculated analytically. If the spacing between the two groundplanes is H, the width of the conductors w, the spacing between the conductors s, and the permittivity of the medium Er, 
 
<CODE><pre>
----------^-------------------------------------------------------------
          |                                               
          |              <---w---><-----s----><---w-->
          H              ---------            --------            Er
          |                                      
          |                               
----------v-------------------------------------------------------------
</pre></CODE>
 
then the impedances are given by. <p>
 
Zeven=(30*pi/sqrt(er))*(K(ke')/K(ke))<br>
Zodd=(30*pi/sqrt(er))*(K(ko')/K(ko))<p>

K(kx)=complete elliptic integral of the first kind. <p>

ke=(tanh((pi/2)*(w/H)))*tanh((pi/2)*(w+s)/H)<br>
ko=(tanh((pi/2)*(w/H)))*coth((pi/2)*(w+s)/H)<p>

ke'=sqrt(1-(ke^2))<br>
ko'=sqrt(1-(ko^2))<p>

This data is taken from Matthaei, Young and Jones, "Microwave Filters, Impedance Matching Networks and Coupling Structures,"  Artech House, Dedham, MA., 1980. I'm very grateful to Paul Mason AA1LL / KB1CZP  <aa1ll@email.com> for prviding me with these equations, references and nomongraphs. 
<p>
A programme <CODE>calc_coupler</CODE> was written to calculate Zodd and Zeven from the dimensions. This makes use of the GNU scientific library at <a href="http://sources.redhat.com/gsl">http://sources.redhat.com/gsl</a>, so this <STRONG>must</STRONG> be installed on the system for <CODE>calc_coupler</CODE> to work properly. 

<p>atlc is written and supported by <a href="mailto: drkirkby@ntlworld.com?subject=atlc%20-%20Arbitrary%20Transmission%20Line%20Calculator">Dr. David Kirkby (G8WRB)</A> It it issued under the <a href="http://www.gnu.org/copyleft/gpl.html">GNU General Public Licence</A><p>
<a href="http://atlc.sourceforge.net">Return to the atlc homepage</a>
</body>
</html>
